[
    {
        "id_lesson": 291013,
        "steps": [
            {
                "id_step": 1090385,
                "text": {
                    "text": "Содержание урока\nС помощью запросов корректировки данных решим задачу о занесении в базу книг, привезенных на склад поставщиком.\nБаза данных о книгах  включает три таблицы genre, author и book, информация о поставке занесена в таблицу supply. С разными типами книг из поставки необходимо выполнить разные действия:\n\nдля книг, которые уже есть на складе по той же цене, что и в поставке, - увеличить их количество на значение, указанное в поставке (пример);\nдля книг, которые уже есть на складе, но цена книги в поставке отличается, - увеличить количество экземпляров и вычислить новую цену, при расчете учесть количество имеющихся и новых экземпляров книг (задание);\nдля книг, которых на складе нет, - проверить, есть ли  автор книги в базе, если нет - занести фамилию автора, а потом добавить новую запись о книге, оставив поле для описания жанра пустым;\nзадать жанр для новых книг.\n\nЕще одно типовое действие на складе - удаление устаревшей информации. С помощью запросов корректировки удаление данных о жанрах, авторах и книгах выполняется в зависимости от того, какие свойства внешних ключей были указаны в таблицах при их создании:\n\nкаскадное удаление записей связанных таблиц;\nудаление записей в главной таблице с сохранением записей в зависимой;\nудаление записей с использованием информации из связанных таблиц.\n\n Структура и наполнение  таблиц\nКонцептуальная схема базы данных:\n\n \n \n \n \nЛогическая схема базы данных:\n\n \n \n \n \n \n \n \n \nТаблица author(создание, заполнение):\n\n[TABLE]\n\nТаблица genre(создание, заполнение, рассмотрено в качестве примеров):\n\n[TABLE]\n\nТаблица book (создание, заполнение):\n\n[TABLE]\n\nТаблица supply(создание, заполнение):\n\n[TABLE]\n",
                    "tables": [
                        "{\"0\":{\"0\":\"author_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\"},\"1\":{\"0\":\"name_author\",\"1\":\"Булгаков М.А.\",\"2\":\"Достоевский Ф.М.\",\"3\":\"Есенин С.А.\",\"4\":\"Пастернак Б.Л.\",\"5\":\"Лермонтов М.Ю.\"}}",
                        "{\"0\":{\"0\":\"genre_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\"},\"1\":{\"0\":\"name_genre\",\"1\":\"Роман\",\"2\":\"Поэзия\",\"3\":\"Приключения\"}}",
                        "{\"0\":{\"0\":\"book_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\",\"6\":\"6\",\"7\":\"7\",\"8\":\"8\"},\"1\":{\"0\":\"title\",\"1\":\"Мастер и Маргарита\",\"2\":\"Белая гвардия\",\"3\":\"Идиот\",\"4\":\"Братья Карамазовы\",\"5\":\"Игрок\",\"6\":\"Стихотворения и поэмы\",\"7\":\"Черный человек\",\"8\":\"Лирика\"},\"2\":{\"0\":\"author_id\",\"1\":\"1\",\"2\":\"1\",\"3\":\"2\",\"4\":\"2\",\"5\":\"2\",\"6\":\"3\",\"7\":\"3\",\"8\":\"4\"},\"3\":{\"0\":\"genre_id\",\"1\":\"1\",\"2\":\"1\",\"3\":\"1\",\"4\":\"1\",\"5\":\"1\",\"6\":\"2\",\"7\":\"2\",\"8\":\"2\"},\"4\":{\"0\":\"price\",\"1\":\"670.99\",\"2\":\"540.50\",\"3\":\"460.00\",\"4\":\"799.01\",\"5\":\"480.50\",\"6\":\"650.00\",\"7\":\"570.20\",\"8\":\"518.99\"},\"5\":{\"0\":\"amount\",\"1\":\"3\",\"2\":\"5\",\"3\":\"10\",\"4\":\"3\",\"5\":\"10\",\"6\":\"15\",\"7\":\"6\",\"8\":\"2\"}}",
                        "{\"0\":{\"0\":\"supply_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\",\"6\":\"6\"},\"1\":{\"0\":\"title\",\"1\":\"Доктор Живаго\",\"2\":\"Черный человек\",\"3\":\"Белая гвардия\",\"4\":\"Идиот\",\"5\":\"Стихотворения и поэмы\",\"6\":\"Остров сокровищ\"},\"2\":{\"0\":\"author\",\"1\":\"Пастернак Б.Л.\",\"2\":\"Есенин С.А.\",\"3\":\"Булгаков М.А.\",\"4\":\"Достоевский Ф.М.\",\"5\":\"Лермонтов М.Ю.\",\"6\":\"Стивенсон Р.Л.\"},\"3\":{\"0\":\"price\",\"1\":\"380.80\",\"2\":\"570.20\",\"3\":\"540.50\",\"4\":\"360.80\",\"5\":\"255.90\",\"6\":\"599.99\"},\"4\":{\"0\":\"amount\",\"1\":\"4\",\"2\":\"6\",\"3\":\"7\",\"4\":\"3\",\"5\":\"4\",\"6\":\"5\"}}"
                    ]
                }
            },
            {
                "id_step": 1098820,
                "text": {
                    "text": "Запросы на обновление, связанные таблицы\nВ запросах на обновление можно использовать связанные таблицы:\nUPDATE таблица_1\n     ... JOIN таблица_2\n     ON выражение\n     ...\nSET ...   \nWHERE ...;\nПри этом исправлять данные можно во всех используемых в запросе таблицах.\nПример\nДля книг, которые уже есть на складе (в таблице book) по той же цене, что и в поставке (supply), увеличить количество на значение, указанное в поставке, а также обнулить количество этих книг в поставке.\nЭтот запрос должен отобрать строки из таблиц bookи supply такие, что у них совпадают и автор, и название книги. Но в таблице supply фамилия автора записана не числом (id), а текстом. Следовательно, чтобы выполнить сравнение по фамилии автора нужно \"подтянуть\" таблицу author,  которая связана с bookпо столбцу author_id.  И в логическом выражении, описывающем соединение таблиц, можно будет использовать столбцы из таблиц book, authorи supply. \nЕсли таблицы логически связаны по двум и более столбцам (на рисунке связи обозначены линиями), возможно через другие таблицы, условие соединение будет включать связи по нужным столбцам через логический оператор AND. Например, для следующих таблиц логическую связь по названию и автору:\n\nусловие соединения можно записать в виде:\nbook INNER JOIN author ON author.author_id = book.author_id\n     INNER JOIN supply ON book.title = supply.title \n                          and supply.author = author.name_author\nЗапрос:\nUPDATE book \n     INNER JOIN author ON author.author_id = book.author_id\n     INNER JOIN supply ON book.title = supply.title \n                         and supply.author = author.name_author\nSET book.amount = book.amount + supply.amount,\n    supply.amount = 0   \nWHERE book.price = supply.price;\n\nSELECT * FROM book;\n\nSELECT * FROM supply;\n\nРезультат:\nAffected rows: 4\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 460.00 | 10     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n+---------+-----------------------+-----------+----------+--------+--------+\nAffected rows: 8\n\nQuery result:\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 0      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 0      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nAffected rows: 6\nПод нужное нам условие подходят две книги «Белая гвардия» Булгакова и «Черный человек» Есенина. В таблице book их количество увеличилось, а в таблице supply - обнулилось.\nЗадание\nДля книг, которые уже есть на складе (в таблице book), но по другой цене, чем в поставке (supply),  необходимо в таблице book увеличить количество на значение, указанное в поставке,  и пересчитать цену. А в таблице  supply обнулить количество этих книг. Формула для пересчета цены:\n\\[price={(p_1*k_1+p_2*k_2)\\over k_1+k_2}\\]где  p1, p2 - цена книги в таблицах book и supply;\n       k1, k2 - количество книг в таблицах book и supply.\nПояснение\nПересчитываться должна цена только одной книги Достоевского «Идиот», для этой же книги увеличится количество в таблице book и обнулится количество в таблице supply.\n\nРезультат\nAffected rows: 2\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 5      |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 6      |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n+---------+-----------------------+-----------+----------+--------+--------+\nAffected rows: 8\nQuery result:\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 6      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 0      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nAffected rows: 6\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 5      |\n| 3       | Идиот                 | 2         | 1        | 460.00 | 10     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 6      |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 6      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\t\t\t\t\t\t\t\n+-----------+------------------+\t\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1100655,
                "text": {
                    "text": "Запросы на добавление, связанные таблицы\nЗапросом на добавление можно добавить записи, отобранные с помощью запроса на выборку, который включает несколько таблиц:\nINSERT INTO таблица (список_полей)\nSELECT список_полей_из_других_таблиц\nFROM \n    таблица_1 \n    ... JOIN таблица_2 ON ...\n    ...\nПример\nВ таблице supply  есть новые книги, которых на складе еще не было. Прежде чем добавлять их в таблицу book,  необходимо из таблицы supplyотобрать новых авторов, если таковые имеются.\nЗапрос:\nSELECT name_author, supply.author\nFROM \n    author \n    RIGHT JOIN supply ON author.name_author = supply.author;\nПоскольку таблица author и поле в таблице supply называются одинаково, желательно указывать полную ссылку на поле (supply.author), чтобы запрос был более читабельным.\nРезультат:\n+------------------+------------------+\n| name_author      | author           |\n+------------------+------------------+\n| Булгаков М.А.    | Булгаков М.А.    |\n| Достоевский Ф.М. | Достоевский Ф.М. |\n| Есенин С.А.      | Есенин С.А.      |\n| Пастернак Б.Л.   | Пастернак Б.Л.   |\n| Лермонтов М.Ю.   | Лермонтов М.Ю.   |\n| None             | Стивенсон Р.Л.   |\n+------------------+------------------+\nВыполнив правое внутреннее соединение таблиц, получили значение Null (None) в поле name_author в строке того автора, которого нет в таблице author, в нашем случае это Стивенсон.\nТеперь достаточно в запросе задать условие отбора, и список новых авторов готов для включения в таблицу author.\nЗапрос:\nSELECT supply.author\nFROM \n    author \n    RIGHT JOIN supply on author.name_author = supply.author\nWHERE name_author IS Null;\nРезультат:\n+----------------+\n| author         |\n+----------------+\n| Стивенсон Р.Л. |\n+----------------+\nЗадание\nВключить новых авторов в таблицу author с помощью запроса на добавление, а затем вывести все данные из таблицы author.  Новыми считаются авторы, которые есть в таблице supply, но нет в таблице author.\nРезультат\nAffected rows: 1\n\nQuery result:\n+-----------+------------------+\n| author_id | name_author      |\n+-----------+------------------+\n| 1         | Булгаков М.А.    |\n| 2         | Достоевский Ф.М. |\n| 3         | Есенин С.А.      |\n| 4         | Пастернак Б.Л.   |\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 460.00 | 10     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 6      |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 12     |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\t\t\t\t\t\t\t\n+-----------+------------------+\t\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1100665,
                "text": {
                    "text": "Запрос на добавление, связанные таблицы\nСледующий шаг - добавить новые записи о книгах, которые есть в таблице supply и нет в таблице book. (В таблицах supply и book сохранены изменения предыдущих шагов). Поскольку в таблице supply не указан жанр книги, оставить его пока пустым (занести значение Null).\nПример\nПрежде всего необходимо сформировать запрос с полями, которые соответствуют полям таблицы book, так как использовать только таблицу supply нельзя - в ней вместо кода автора стоит его фамилия. \nЗапрос:\nSELECT title, author_id, price, amount\nFROM \n    author \n    INNER JOIN supply ON author.name_author = supply.author;\nРезультат:\n+-----------------------+-----------+--------+--------+\n| title                 | author_id | price  | amount |\n+-----------------------+-----------+--------+--------+\n| Доктор Живаго         | 4         | 380.80 | 4      |\n| Черный человек        | 3         | 570.20 | 0      |\n| Белая гвардия         | 1         | 540.50 | 0      |\n| Идиот                 | 2         | 360.80 | 0      |\n| Стихотворения и поэмы | 5         | 255.90 | 4      |\n| Остров сокровищ       | 6         | 599.99 | 5      |\n+-----------------------+-----------+--------+--------+\nДалее необходимо отобрать только новые книги из таблицы supply. Как видно из таблицы с результатами запроса, в тех записях, которые нужно добавить, значения столбца amount не равны 0 (количество уже учтенных книг обнулены предыдущим запросом). Добавим это условие в запрос.\nЗапрос:\nSELECT title, author_id, price, amount\nFROM \n    author \n    INNER JOIN supply ON author.name_author = supply.author\nWHERE amount <> 0;\nРезультат:\n+-----------------------+-----------+--------+--------+\n| title                 | author_id | price  | amount |\n+-----------------------+-----------+--------+--------+\n| Доктор Живаго         | 4         | 380.80 | 4      |\n| Стихотворения и поэмы | 5         | 255.90 | 4      |\n| Остров сокровищ       | 6         | 599.99 | 5      |\n+-----------------------+-----------+--------+--------+\nЗадание\nДобавить новые книги из таблицы supply в таблицу book на основе сформированного выше запроса. Затем вывести для просмотра таблицу book.\nПояснение\nЕсли нужно оставить какое-то поле пустым - его просто не указывают в списке полей таблицы, в которую добавляются записи.\n\nРезультат\nAffected rows: 3\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | NULL     | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | NULL     | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | NULL     | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 0      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 0      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 0      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\t\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1100696,
                "text": {
                    "text": "Запрос на обновление, вложенные запросы\nПосле того, как новые книги добавлены в таблицу book, нужно указать к какому жанру они относятся. Для этого используется запрос на обновление, в котором можно указать значения столбцов из других таблиц, либо использовать вложенные запросы для получения этих значений.\nПример\nЗадать для книги Пастернака «Доктор Живаго»  жанр «Роман».\nЕсли мы знаем код этой книги в таблице book (в нашем случае это 9) и код жанра «Роман» в таблице genre (это 1), запрос будет очень простым.\nЗапрос:\nUPDATE book\nSET genre_id = 1\nWHERE book_id = 9;\n\nSELECT * FROM book;\nРезультат:\nAffected rows: 1\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | NULL     | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | NULL     | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nБолее сложным будет запрос, если известно только название жанра (результат будет точно таким же):\nЗапрос:\nUPDATE book\nSET genre_id = \n      (\n       SELECT genre_id \n       FROM genre \n       WHERE name_genre = 'Роман'\n      )\nWHERE book_id = 9;\n\nSELECT * FROM book;\nЗадание\n Занести для книги «Стихотворения и поэмы» Лермонтова жанр «Поэзия», а для книги «Остров сокровищ» Стивенсона - «Приключения». (Использовать два запроса).\nРезультат\nAffected rows: 2\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | Null     | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | Null     | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\n\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\t\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1100971,
                "text": {
                    "text": "Каскадное удаление записей связанных таблиц\nПри создании таблицы для внешних ключей с помощью ON DELETE устанавливаются опции, которые определяют действия , выполняемые при удалении связанной строки из главной таблицы.\nВ частности, ON DELETE CASCADE автоматически удаляет строки из зависимой таблицы при удалении  связанных строк в главной таблице.\nВ таблице book эта опция установлена для поля author_id.\nПример\nУдалим из таблицы author всех авторов, фамилия которых начинается на «Д», а из таблицы book  - все книги этих авторов.\nЗапрос:\nDELETE FROM author\nWHERE name_author LIKE \"Д%\";\n\nSELECT * FROM author;\n\nSELECT * FROM book;\nРезультат:\nAffected rows: 1\n\nQuery result:\n+-----------+----------------+\n| author_id | name_author    |\n+-----------+----------------+\n| 1         | Булгаков М.А.  |\n| 3         | Есенин С.А.    |\n| 4         | Пастернак Б.Л. |\n| 5         | Лермонтов М.Ю. |\n| 6         | Стивенсон Р.Л. |\n+-----------+----------------+\nAffected rows: 5\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nОдним запросом удаляются связанные записи из главной и зависимой таблицы. В нашем случае удалился автор Достоевский и все его книги.\nЗадание\nУдалить всех авторов и все их книги, общее количество книг которых меньше 20.\nПояснение\nДля подсчета количества книг каждого автора используйте вложенный запрос. \n\nРезультат\nAffected rows: 4\n\nQuery result:\n+-----------+------------------+\n| author_id | name_author      |\n+-----------+------------------+\n| 2         | Достоевский Ф.М. |\n| 3         | Есенин С.А.      |\n+-----------+------------------+\nAffected rows: 2\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n+---------+-----------------------+-----------+----------+--------+--------+\nAffected rows: 5\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 6      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1101616,
                "text": {
                    "text": "Удаление записей главной таблицы с сохранением записей в зависимой\nПри создании таблицы для внешних ключей с помощью ON DELETE устанавливаются опции, которые определяют действия, выполняемые при удалении связанной строки из главной таблицы.\nЕсли задано SET NULL, то при удалении связанной строки из главной таблицы в зависимой, в столбце внешнего ключа, устанавливается значение NULL. (При этом в столбце внешнего ключа должно быть допустимо значение NULL)\nВ таблице book эта опция установлена на поле genre_id.\nПример\nУдалим из таблицы genre все  жанры, название которых заканчиваются на «я» , а в таблице book  -  для этих жанров установим значение Null.\nЗапрос:\nDELETE FROM genre\nWHERE name_genre LIKE \"%я\";\n\nSELECT * FROM genre;\n\nSELECT * FROM book;\nРезультат:\nAffected rows: 2\n\nQuery result:\n+----------+------------+\n| genre_id | name_genre |\n+----------+------------+\n| 1        | Роман      |\n+----------+------------+\nAffected rows: 1\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | Null     | 650.00 | 15     |\n| 7       | Черный человек        | 3         | Null     | 570.20 | 12     |\n| 8       | Лирика                | 4         | Null     | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | Null     | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | Null     | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nAffected rows: 11\n\nВ нашем случае удалились жанры «Поэзия» и «Приключения».\nЗадание\nУдалить все жанры, к которым относится меньше 4-х наименований книг. В таблице book для этих жанров установить значение Null.\nПояснение\n\nВ запросе считать все уникальные книги. Например, книги \"Стихотворения и поэмы\" написаны разными авторами и имеют разный book_id, то есть это разные книги.\nДля отбора жанров, к которым относится меньше 4-х книг,  использовать вложенный запрос.\n\n\nРезультат\nQuery result:\n+----------+------------+\n| genre_id | name_genre |\n+----------+------------+\n| 1        | Роман      |\n| 2        | Поэзия     |\n+----------+------------+\nAffected rows: 2\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | Null     | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nAffected rows: 11\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 6      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1439329,
                "text": {
                    "text": "Удаление записей, использование связанных таблиц\nПри удалении записей из таблицы можно использовать информацию из других связанных с ней таблиц. В этом случае синтаксис запроса имеет вид:\nDELETE FROM таблица_1\nUSING \n    таблица_1 \n    INNER JOIN таблица_2 ON ...\nWHERE ...\nПример\nУдалить всех авторов из таблицы author, у которых есть книги, количество экземпляров которых меньше 3. Из таблицы book удалить все книги этих авторов.\nЗапрос:\nDELETE FROM author\nUSING \n    author \n    INNER JOIN book ON author.author_id = book.author_id\nWHERE book.amount < 3;\n\nSELECT * FROM author;\n\nSELECT * FROM book;\nРезультат:\nAffected rows: 1\n\nQuery result:\n+-----------+------------------+\n| author_id | name_author      |\n+-----------+------------------+\n| 1         | Булгаков М.А.    |\n| 2         | Достоевский Ф.М. |\n| 3         | Есенин С.А.      |\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\nAffected rows: 5\n\nQuery result:\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nКниги из таблицы book будут удалены автоматически, так как для столбца author_id из таблицы book установлено каскадное удаление записей.\nЗадание\nУдалить всех авторов, которые пишут в жанре \"Поэзия\". Из таблицы book удалить все книги этих авторов. В запросе для отбора авторов использовать полное название жанра, а не его id.\nРезультат\nAffected rows: 3\n\nQuery result:\n+-----------+------------------+\n| author_id | name_author      |\n+-----------+------------------+\n| 1         | Булгаков М.А.    |\n| 2         | Достоевский Ф.М. |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\nAffected rows: 3\n\nQuery result:\n+---------+--------------------+-----------+----------+--------+--------+\n| book_id | title              | author_id | genre_id | price  | amount |\n+---------+--------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия      | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот              | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы  | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок              | 2         | 1        | 480.50 | 10     |\n| 11      | Остров сокровищ    | 6         | 3        | 599.99 | 5      |\n+---------+--------------------+-----------+----------+--------+--------+\n\nСтруктура и наполнение таблиц\nТаблица book\n+---------+-----------------------+-----------+----------+--------+--------+\n| book_id | title                 | author_id | genre_id | price  | amount |\n+---------+-----------------------+-----------+----------+--------+--------+\n| 1       | Мастер и Маргарита    | 1         | 1        | 670.99 | 3      |\n| 2       | Белая гвардия         | 1         | 1        | 540.50 | 12     |\n| 3       | Идиот                 | 2         | 1        | 437.11 | 13     |\n| 4       | Братья Карамазовы     | 2         | 1        | 799.01 | 3      |\n| 5       | Игрок                 | 2         | 1        | 480.50 | 10     |\n| 6       | Стихотворения и поэмы | 3         | 2        | 650.00 | 15     |\n| 7       | Черный человек        | 3         | 2        | 570.20 | 12     |\n| 8       | Лирика                | 4         | 2        | 518.99 | 2      |\n| 9       | Доктор Живаго         | 4         | 1        | 380.80 | 4      |\n| 10      | Стихотворения и поэмы | 5         | 2        | 255.90 | 4      |\n| 11      | Остров сокровищ       | 6         | 3        | 599.99 | 5      |\n+---------+-----------------------+-----------+----------+--------+--------+\nТаблица supply\n+-----------+-----------------------+------------------+--------+--------+\n| supply_id | title                 | author           | price  | amount |\n+-----------+-----------------------+------------------+--------+--------+\n| 1         | Доктор Живаго         | Пастернак Б.Л.   | 380.80 | 4      |\n| 2         | Черный человек        | Есенин С.А.      | 570.20 | 6      |\n| 3         | Белая гвардия         | Булгаков М.А.    | 540.50 | 7      |\n| 4         | Идиот                 | Достоевский Ф.М. | 360.80 | 3      |\n| 5         | Стихотворения и поэмы | Лермонтов М.Ю.   | 255.90 | 4      |\n| 6         | Остров сокровищ       | Стивенсон Р.Л.   | 599.99 | 5      |\n+-----------+-----------------------+------------------+--------+--------+\nТаблица author                          Таблица genre\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| author_id | name_author      |\t| genre_id | name_genre  |\t\t\t\n+-----------+------------------+\t+----------+-------------+\t\t\t\n| 1         | Булгаков М.А.    |\t| 1        | Роман       |\t\t\t\n| 2         | Достоевский Ф.М. |\t| 2        | Поэзия      |\t\t\t\n| 3         | Есенин С.А.      |\t| 3        | Приключения |\t\t\t\n| 4         | Пастернак Б.Л.   |\t+----------+-------------+\t\t\t\n| 5         | Лермонтов М.Ю.   |\n| 6         | Стивенсон Р.Л.   |\n+-----------+------------------+\t\t\t\t\t\t\t\n",
                    "tables": []
                }
            },
            {
                "id_step": 1100892,
                "text": {
                    "text": "Задание\nПридумайте один или несколько запросов корректировки данных для таблиц book,  author, genre и supply . Проверьте, правильно ли они работают.\nПри желании можно формулировку запросов  разместить в комментариях. \nРазмещенные задания можно использовать для закрепления материала урока.\nОценивайте понравившиеся Вам запросы.\nВ последнем модуле создан отдельный урок, в котором мы разместим запросы, набравшие наибольшее количество лайков. \nСтруктура и наполнение таблиц:\nТаблица genre:\n\n[TABLE]\n\nТаблицаauthor:\n\n[TABLE]\n\nТаблица book:\n\n[TABLE]\n\nТаблица supply:\n\n[TABLE]\n",
                    "tables": [
                        "{\"0\":{\"0\":\"genre_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\"},\"1\":{\"0\":\"name_genre\",\"1\":\"Роман\",\"2\":\"Поэзия\",\"3\":\"Приключения\"}}",
                        "{\"0\":{\"0\":\"author_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\"},\"1\":{\"0\":\"name_author\",\"1\":\"Булгаков М.А.\",\"2\":\"Достоевский Ф.М.\",\"3\":\"Есенин С.А.\",\"4\":\"Пастернак Б.Л.\",\"5\":\"Лермонтов М.Ю.\"}}",
                        "{\"0\":{\"0\":\"book_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\",\"6\":\"6\",\"7\":\"7\",\"8\":\"8\"},\"1\":{\"0\":\"title\",\"1\":\"Мастер и Маргарита\",\"2\":\"Белая гвардия\",\"3\":\"Идиот\",\"4\":\"Братья Карамазовы\",\"5\":\"Игрок\",\"6\":\"Стихотворения и поэмы\",\"7\":\"Черный человек\",\"8\":\"Лирика\"},\"2\":{\"0\":\"author_id\",\"1\":\"1\",\"2\":\"1\",\"3\":\"2\",\"4\":\"2\",\"5\":\"2\",\"6\":\"3\",\"7\":\"3\",\"8\":\"4\"},\"3\":{\"0\":\"genre_id\",\"1\":\"1\",\"2\":\"1\",\"3\":\"1\",\"4\":\"1\",\"5\":\"1\",\"6\":\"2\",\"7\":\"2\",\"8\":\"2\"},\"4\":{\"0\":\"price\",\"1\":\"670.99\",\"2\":\"540.50\",\"3\":\"460.00\",\"4\":\"799.01\",\"5\":\"480.50\",\"6\":\"650.00\",\"7\":\"570.20\",\"8\":\"518.99\"},\"5\":{\"0\":\"amount\",\"1\":\"3\",\"2\":\"5\",\"3\":\"10\",\"4\":\"3\",\"5\":\"10\",\"6\":\"15\",\"7\":\"6\",\"8\":\"2\"}}",
                        "{\"0\":{\"0\":\"supply_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\",\"6\":\"6\"},\"1\":{\"0\":\"title\",\"1\":\"Доктор Живаго\",\"2\":\"Черный человек\",\"3\":\"Белая гвардия\",\"4\":\"Идиот\",\"5\":\"Стихотворения и поэмы\",\"6\":\"Остров сокровищ\"},\"2\":{\"0\":\"author\",\"1\":\"Пастернак Б.Л.\",\"2\":\"Есенин С.А.\",\"3\":\"Булгаков М.А.\",\"4\":\"Достоевский Ф.М.\",\"5\":\"Лермонтов М.Ю.\",\"6\":\"Стивенсон Р.Л.\"},\"3\":{\"0\":\"price\",\"1\":\"380.80\",\"2\":\"570.20\",\"3\":\"540.50\",\"4\":\"360.80\",\"5\":\"255.90\",\"6\":\"599.99\"},\"4\":{\"0\":\"amount\",\"1\":\"4\",\"2\":\"6\",\"3\":\"7\",\"4\":\"3\",\"5\":\"4\",\"6\":\"5\"}}"
                    ]
                }
            }
        ]
    }
]