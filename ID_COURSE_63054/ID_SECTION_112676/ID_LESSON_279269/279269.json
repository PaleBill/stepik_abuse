[
    {
        "id_lesson": 279269,
        "steps": [
            {
                "id_step": 1032490,
                "text": {
                    "text": "Содержание урока\nВ этом уроке будет рассмотрен синтаксис и семантика следующих SQL запросов: \n\nвыборка всех данных из таблицы; \nвыборка данных из отдельных столбцов; \nприсвоение новых имен столбцам при формировании выборки; \nсоздание вычисляемых столбцов; \nвычисляемые столбцы, математические функции; \nвычисляемые столбцы, логические функции; \nвыборка данных по простому условию; \nвыборка данных с использованием логических выражений и операций; \nвыборка данных, операторы BETWEEN, IN; \nвыборка данных с сортировкой;\nвыборка текстовых данных по шаблону, оператор LIKE. \n\nСтруктура и наполнение таблицы\nВсе запросы будут формулироваться для таблицы book(создание, заполнение):\n\n[TABLE]\n",
                    "tables": [
                        "{\"0\":{\"0\":\"book_id\",\"1\":\"INT PRIMARY KEY AUTO_INCREMENT\",\"2\":\"1\",\"3\":\"2\",\"4\":\"3\",\"5\":\"4\",\"6\":\"5\"},\"1\":{\"0\":\"title\",\"1\":\"VARCHAR(50)\",\"2\":\"Мастер и Маргарита\",\"3\":\"Белая гвардия\",\"4\":\"Идиот\",\"5\":\"Братья Карамазовы\",\"6\":\"Стихотворения и поэмы\"},\"2\":{\"0\":\"author\",\"1\":\"VARCHAR(30)\",\"2\":\"Булгаков М.А.\",\"3\":\"Булгаков М.А.\",\"4\":\"Достоевский Ф.М.\",\"5\":\"Достоевский Ф.М.\",\"6\":\"Есенин С.А.\"},\"3\":{\"0\":\"price\",\"1\":\"DECIMAL(8,2)\",\"2\":\"670.99\",\"3\":\"540.50\",\"4\":\"460.00\",\"5\":\"799.01\",\"6\":\"650.00\"},\"4\":{\"0\":\"amount\",\"1\":\"INT\",\"2\":\"3\",\"3\":\"5\",\"4\":\"10\",\"5\":\"2\",\"6\":\"15\"}}"
                    ]
                }
            },
            {
                "id_step": 2445668,
                "text": {
                    "text": "Выборка всех данных из таблицы\nДля того чтобы отобрать все данные из таблицы используется SQL запрос следующей структуры: \n\nключевое слово SELECT; \nсимвол « *» ; \nключевое слово FROM; \nимя таблицы.\n\nРезультатом является таблица, в которую включены все строки и столбцы указанной в запросе таблицы.\nПример\nВыбрать все записи таблицы book .\nЗапрос:\nSELECT * FROM book;\nЗадание\nВывести информацию о всех книгах, хранящихся на складе.\nДля этого: \n\nНапишите SQL запрос в окне кода; \nОтправьте на проверку (кнопка  Отправить); \nЕсли запрос работает неверно, исправьте его и снова отправьте на проверку.\n\nВажно! В окне кода можно использовать комментарии для сохранения разных вариантов запросов или пояснений. Комментарии заключаются в /* и */\nРезультат:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\nAffected rows: 5",
                    "tables": []
                }
            },
            {
                "id_step": 2445676,
                "text": {
                    "text": "Выборка отдельных столбцов\nДля того чтобы отобрать данные из определенных столбцов таблицы используется SQL запрос следующей структуры: \n\nключевое слово SELECT ; \nсписок столбцов таблицы через запятую; \nключевое слово FROM ; \nимя таблицы.\n\nРезультатом является таблица, в которую включены все данные из указанных после SELECT столбцов исходной таблицы.\nПример\nВыбрать названия книг и их количества из таблицы book .\nЗапрос:\nSELECT title, amount FROM book;\nРезультат:\n+-----------------------+--------+ \n|title                  | amount |\n+-----------------------+--------+ \n| Мастер и Маргарита    | 3      | \n| Белая гвардия         | 5      | \n| Идиот                 | 10     | \n| Братья Карамазовы     | 2      | \n| Стихотворения и поэмы | 15     |\n+-----------------------+--------+\nПояснение. Чтобы посмотреть, как работает запрос примера, скопируйте его код в окно для ввода и нажмите на черную кнопку Запустить код. После запуска выведется результат запроса, который можно сравнить с приведенным образцом. Задание\nЗадание\nВыбрать авторов, название книг и их цену из таблицы book.\nРезультат:\n+------------------+-----------------------+--------+\n| author           | title                 | price  |\n+------------------+-----------------------+--------+\n| Булгаков М.А.    | Мастер и Маргарита    | 670.99 |\n| Булгаков М.А.    | Белая гвардия         | 540.50 |\n| Достоевский Ф.М. | Идиот                 | 460.00 |\n| Достоевский Ф.М. | Братья Карамазовы     | 799.01 |\n| Есенин С.А.      | Стихотворения и поэмы | 650.00 |\n+------------------+-----------------------+--------+\nAffected rows: 5\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1044690,
                "text": {
                    "text": "Присвоение новых имен столбцам при формировании выборки\nДля того чтобы отобрать данные из определенных столбцов таблицы и одновременно задать столбцам новые названия в результате выборки используется SQL запрос следующей структуры: \n\nключевое слово SELECT ; \nимя столбца;\nключевое слово AS ; \nновое название столбца (можно русскими буквами), выводимое в результате запроса, но это должно быть одно слово, если название состоит из двух слов – соединяйте их подчеркиванием, например, Количество_книг; \nзапятая; \nимя столбца; \n.... \nключевое слово FROM ; \nимя таблицы.\n\nВ одном запросе можно использовать и имена столбцов из таблицы, и новые названия.\nРезультатом является таблица, в которую включены все данные из указанных после SELECT столбцов исходной таблицы. Каждому столбцу в результате запроса присваивается новое имя, заданное после AS, или столбец получает имя столбца исходной таблицы, если AS отсутствует.\nПример\nВыбрать все названия книг и их количества из таблицы book , для столбца title задать новое имя Название.\nЗапрос:\nSELECT title AS Название, amount \nFROM book;\nРезультат:\n+-----------------------+--------+\n| Название              | amount |\n+-----------------------+--------+ \n| Мастер и Маргарита    | 3      |\n| Белая гвардия         | 5      | \n| Идиот                 | 10     |\n| Братья Карамазовы     | 2      |\n| Стихотворения и поэмы | 15     |\n+-----------------------+--------+\nЗадание\nВыбрать названия книг и авторов из таблицы book, для поля title задать имя(псевдоним) Название, для поля author –  Автор. \nРезультат:\n+-----------------------+------------------+\n| Название              | Автор            |\n+-----------------------+------------------+\n| Мастер и Маргарита    | Булгаков М.А.    |\n| Белая гвардия         | Булгаков М.А.    |\n| Идиот                 | Достоевский Ф.М. |\n| Братья Карамазовы     | Достоевский Ф.М. |\n| Стихотворения и поэмы | Есенин С.А.      |\n+-----------------------+------------------+\nAffected rows: 5\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1045389,
                "text": {
                    "text": "Выборка данных с созданием вычисляемого столбца\nС помощью SQL запросов можно осуществлять вычисления по каждой строке таблицы с помощью вычисляемого столбца. Для него в списке полей после оператора SELECT указывается выражение и задается имя.\nВыражение может включать имена столбцов, константы, знаки операций, встроенные функции.\nРезультатом является таблица, в которую включены все данные из указанных после SELECT столбцов, а также новый столбец, в каждой строке которого вычисляется заданное выражение.\nПояснение от слушателя. Можно осуществлять арифметические и логические вычисления над целым столбцом, результатом будет новый столбец.\nПример\nВывести всю информацию о книгах, а также для каждой позиции посчитать ее стоимость (произведение цены на количество). Вычисляемому столбцу дать имя total .\nЗапрос:\nSELECT title, author, price, amount, \n     price * amount AS total \nFROM book;\nРезультат:\n+-----------------------+------------------+--------+--------+---------+ \n| title                 | author           | price  | amount | total   | \n+-----------------------+------------------+--------+--------+---------+ \n| Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      | 2012.97 | \n| Белая гвардия         | Булгаков М.А.    | 540.50 | 5      | 2702.50 | \n| Идиот                 | Достоевский Ф.М. | 460.00 | 10     | 4600.00 | \n| Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      | 1598.02 | \n| Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     | 9750.00 |\n+-----------------------+------------------+--------+--------+---------+ \nЗадание\nДля упаковки каждой книги требуется один лист бумаги, цена которого 1 рубль 65 копеек. Посчитать стоимость упаковки для каждой книги (сколько денег потребуется, чтобы упаковать все экземпляры книги). В запросе вывести название книги, ее количество и стоимость упаковки, последний столбец назвать pack. \nРезультат:\n+-----------------------+--------+-------+\n| title                 | amount | pack  |\n+-----------------------+--------+-------+\n| Мастер и Маргарита    | 3      | 4.95  |\n| Белая гвардия         | 5      | 8.25  |\n| Идиот                 | 10     | 16.50 |\n| Братья Карамазовы     | 2      | 3.30  |\n| Стихотворения и поэмы | 15     | 24.75 |\n+-----------------------+--------+-------+\nAffected rows: 5\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1045392,
                "text": {
                    "text": "Выборка данных, вычисляемые столбцы, математические функции\nВ SQL реализовано множество  математических функций для работы с числовыми данными. В таблице приведены некоторые из них.\n\n[TABLE]\n\nПояснение.   Существуют разные способы округления чисел. В SQL реализовано математическое округление. Для округления вещественного числа нужно в записи числа выбрать разряд в дробной части, до которого производится округление. Цифра, записанная в выбранном разряде: не меняется, если следующая за ней справа цифра - 0, 1, 2, 3 или 4; увеличивается на единицу, если следующая за ней справа цифра - 5,6,7,8 или 9.\nПример \nДля каждой книги из таблицы book вычислим налог на добавленную стоимость (имя столбца tax) , который включен в цену и составляет k = 18%,  а также цену книги (price_tax) без него. Формулы для вычисления:\n\\[tax= {{price *{ k \\over 100}} \\over {1+{k\\over 100}}},\\]\n\\[price\\_tax= {{price} \\over {1+{k\\over 100}}}\\]Значение НДС в 18% взято для ПРИМЕРА, чтобы показать как использовать функции округления.\nПояснение от Андрея Виноградова:\nЭта формула НДС отвечает на вопрос \"Какую сумму увеличили на 18%, чтобы получить текущее значение\"\n\nЗапрос:\nSELECT title, price, \n    (price*18/100)/(1+18/100) AS tax, \n    price/(1+18/100) AS price_tax \nFROM book;\nРезультат:\n+-----------------------+--------+----------------+------------+\n| title                 | price  | tax            | price_tax  |\n+-----------------------+--------+----------------+------------+\n| Мастер и Маргарита    | 670.99 | 102.3544067797 | 568.635593 |\n| Белая гвардия         | 540.50 | 82.4491525424  | 458.050847 |\n| Идиот                 | 460.00 | 70.1694915254  | 389.830508 |\n| Братья Карамазовы     | 799.01 | 121.8828813559 | 677.127119 |\n| Стихотворения и поэмы | 650.00 | 99.1525423729  | 550.847458 |\n+-----------------------+--------+----------------+------------+\nСумма налога и цена книги без налога – это деньги, поэтому количество знаков после запятой у этих чисел должно быть 2. Следовательно необходимо округлить полученные значения.\nЗапрос:\nSELECT title, \n    price, \n    ROUND((price*18/100)/(1+18/100),2) AS tax, \n    ROUND(price/(1+18/100),2) AS price_tax \nFROM book;\nРезультат:\n+-----------------------+--------+--------+-----------+\n| title                 | price  | tax    | price_tax |\n+-----------------------+--------+--------+-----------+\n| Мастер и Маргарита    | 670.99 | 102.35 | 568.64    |\n| Белая гвардия         | 540.50 | 82.45  | 458.05    |\n| Идиот                 | 460.00 | 70.17  | 389.83    |\n| Братья Карамазовы     | 799.01 | 121.88 | 677.13    |\n| Стихотворения и поэмы | 650.00 | 99.15  | 550.85    |\n+-----------------------+--------+--------+-----------+\nЗадание\nВ конце года цену каждой книги на складе пересчитывают – снижают ее на 30%. Написать SQL запрос, который из таблицы book выбирает названия, авторов, количества и вычисляет новые цены книг. Столбец с новой ценой назвать new_price, цену округлить до 2-х знаков после запятой.\nРезультат:\n+-----------------------+------------------+--------+-----------+\n| title                 | author           | amount | new_price |\n+-----------------------+------------------+--------+-----------+\n| Мастер и Маргарита    | Булгаков М.А.    | 3      | 469.69    |\n| Белая гвардия         | Булгаков М.А.    | 5      | 378.35    |\n| Идиот                 | Достоевский Ф.М. | 10     | 322.00    |\n| Братья Карамазовы     | Достоевский Ф.М. | 2      | 559.31    |\n| Стихотворения и поэмы | Есенин С.А.      | 15     | 455.00    |\n+-----------------------+------------------+--------+-----------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": [
                        "{\"Функция\":{\"0\":\"CEILING(x)\",\"1\":\"ROUND(x, k)\",\"2\":\"FLOOR(x)\",\"3\":\"POWER(x, y)\",\"4\":\"SQRT(x)\",\"5\":\"DEGREES(x)\",\"6\":\"RADIANS(x)\",\"7\":\"ABS(x)\",\"8\":\"PI()\"},\"Описание\":{\"0\":\"возвращает наименьшее целое число, большее или равное x  (округляет до целого числа в большую сторону)\",\"1\":\"округляет значение x до k знаков после запятой,  если k не указано – x округляется до целого\",\"2\":\"возвращает наибольшее целое число, меньшее или равное x  (округляет до целого числа в меньшую сторону)\",\"3\":\"возведение x в степень y\",\"4\":\"квадратный корень из x\",\"5\":\"конвертирует значение x из радиан в градусы\",\"6\":\"конвертирует значение x из градусов в радианы\",\"7\":\"модуль числа x\",\"8\":\"pi = 3.1415926...\"},\"Пример\":{\"0\":\"CEILING(4.2)=5  CEILING(-5.8)=-5\",\"1\":\"ROUND(4.361)=4  ROUND(5.86592,1)=5.9\",\"2\":\"FLOOR(4.2)=4  FLOOR(-5.8)=-6\",\"3\":\"POWER(3,4)=81.0\",\"4\":\"SQRT(4)=2.0  SQRT(2)=1.41...\",\"5\":\"DEGREES(3) = 171.8...\",\"6\":\"RADIANS(180)=3.14...\",\"7\":\"ABS(-1) = 1  ABS(1) = 1\",\"8\":null}}"
                    ]
                }
            },
            {
                "id_step": 1045975,
                "text": {
                    "text": "Выборка данных, вычисляемые столбцы, логические функции\nВ SQL реализована возможность заносить в поле значение в зависимости от условия. Для этого используется функция IF():\nIF(логическое_выражение, выражение_1, выражение_2)\nФункция вычисляет логическое_выражение, если оно истина – в поле заносится значение выражения_1, в противном случае –  значение выражения_2. Все три параметра IF() являются обязательными.\nДопускается использование вложенных функций, вместо выражения_1 или выражения_2 может стоять новая функция IF.\nПример \nДля каждой книги из таблицы book установим скидку следующим образом: если количество книг меньше 4, то скидка будет составлять 50% от цены, в противном случае 30%.\nЗапрос:\nSELECT title, amount, price, \n    IF(amount<4, price*0.5, price*0.7) AS sale\nFROM book;\nРезультат:\n+-----------------------+--------+--------+---------+\n| title                 | amount | price  | sale    |\n+-----------------------+--------+--------+---------+\n| Мастер и Маргарита    | 3      | 670.99 | 335.495 |\n| Белая гвардия         | 5      | 540.50 | 378.350 |\n| Идиот                 | 10     | 460.00 | 322.000 |\n| Братья Карамазовы     | 2      | 799.01 | 399.505 |\n| Стихотворения и поэмы | 15     | 650.00 | 455.000 |\n+-----------------------+--------+--------+---------+\nЦена по скидке должна отображаться с двумя знаками после запятой, добавим в запрос округление:\nSELECT title, amount, price, \n    ROUND(IF(amount<4, price*0.5, price*0.7),2) AS sale\nFROM book;\nРезультат:\n+-----------------------+--------+--------+--------+\n| title                 | amount | price  | sale   |\n+-----------------------+--------+--------+--------+\n| Мастер и Маргарита    | 3      | 670.99 | 335.50 |\n| Белая гвардия         | 5      | 540.50 | 378.35 |\n| Идиот                 | 10     | 460.00 | 322.00 |\n| Братья Карамазовы     | 2      | 799.01 | 399.51 |\n| Стихотворения и поэмы | 15     | 650.00 | 455.00 |\n+-----------------------+--------+--------+--------+\nПример\nУсложним вычисление скидки в зависимости от количества книг. Если количество книг меньше 4 – то скидка 50%, меньше 11 – 30%, в остальных случаях – 10%. И еще укажем какая именно скидка на каждую книгу.\nЗапрос:\nSELECT title, amount, price,\n    ROUND(IF(amount < 4, price * 0.5, IF(amount < 11, price * 0.7, price * 0.9)), 2) AS sale,\n    IF(amount < 4, 'скидка 50%', IF(amount < 11, 'скидка 30%', 'скидка 10%')) AS Ваша_скидка\nFROM book;\nРезультат:\n+-----------------------+--------+--------+--------+-------------+\n| title                 | amount | price  | sale   | Ваша_скидка |\n+-----------------------+--------+--------+--------+-------------+\n| Мастер и Маргарита    | 3      | 670.99 | 335.50 | скидка 50%  |\n| Белая гвардия         | 5      | 540.50 | 378.35 | скидка 30%  |\n| Идиот                 | 10     | 460.00 | 322.00 | скидка 30%  |\n| Братья Карамазовы     | 2      | 799.01 | 399.51 | скидка 50%  |\n| Стихотворения и поэмы | 15     | 650.00 | 585.00 | скидка 10%  |\n+-----------------------+--------+--------+--------+-------------+\nЗадание\nПри анализе продаж книг выяснилось, что наибольшей популярностью пользуются книги Михаила Булгакова, на втором месте книги Сергея Есенина. Исходя из этого решили поднять цену книг Булгакова на 10%, а цену книг Есенина - на 5%. Написать запрос, куда включить автора, название книги и новую цену, последний столбец назвать new_price. Значение округлить до двух знаков после запятой.\nПояснение\n\nфамилию автора задавать с инициалами (как занесено в таблице), заключая в одинарные или двойные кавычки;\nдля сравнения на равенство использовать знак =, например author = \"Булгаков М.А.\".\n\n\nРезультат:\n+------------------+-----------------------+-----------+\n| author           | title                 | new_price |\n+------------------+-----------------------+-----------+\n| Булгаков М.А.    | Мастер и Маргарита    | 738.09    |\n| Булгаков М.А.    | Белая гвардия         | 594.55    |\n| Достоевский Ф.М. | Идиот                 | 460.00    |\n| Достоевский Ф.М. | Братья Карамазовы     | 799.01    |\n| Есенин С.А.      | Стихотворения и поэмы | 682.50    |\n+------------------+-----------------------+-----------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1055463,
                "text": {
                    "text": "Выборка данных по условию\nС помощью запросов можно включать в итоговую выборку не все строки исходной таблицы, а только те, которые отвечают некоторому условию. Для этого после указания таблицы, откуда выбираются данные, задается ключевое слово WHERE и логическое выражение, от результата которого зависит будет ли включена строка в выборку или нет. Если условие – истина, то строка(запись)  включается в выборку, если ложь – нет.\nЛогическое выражение может включать операторы сравнения (равно «=», не равно «<>», больше «>», меньше «<», больше или равно«>=», меньше или равно «<=») и выражения, допустимые в SQL.\nПример\nВывести название и цену тех книг, цены которых меньше 600 рублей.\nЗапрос:\nSELECT title, price \nFROM book\nWHERE price < 600;\nРезультат:\n+---------------+--------+\n| title         | price  |\n+---------------+--------+\n| Белая гвардия | 540.50 |\n| Идиот         | 460.00 |\n+---------------+--------+\n Пример\nВывести название, автора  и стоимость (цена умножить на количество) тех книг, стоимость которых больше 4000 рублей\nЗапрос:\nSELECT title, author, price * amount AS total\nFROM book\nWHERE price * amount > 4000;\nРезультат:\n+-----------------------+------------------+---------+\n| title                 | author           | total   |\n+-----------------------+------------------+---------+\n| Идиот                 | Достоевский Ф.М. | 4600.00 |\n| Стихотворения и поэмы | Есенин С.А.      | 9750.00 |\n+-----------------------+------------------+---------+\nПояснение\nВ логическом выражении после WHERE нельзя использовать названия столбцов, присвоенные им с помощью AS,  так как при выполнении запроса сначала вычисляется логическое выражение для каждой строки исходной таблицы, выбираются строки, для которых оно истинно. А только после этого формируется \"шапка запроса\" – столбцы, включаемые в запрос.\n\nЗадание\nВывести автора, название  и цены тех книг, количество которых меньше 10.\nРезультат:\n+------------------+--------------------+--------+\n| author           | title              | price  |\n+------------------+--------------------+--------+\n| Булгаков М.А.    | Мастер и Маргарита | 670.99 |\n| Булгаков М.А.    | Белая гвардия      | 540.50 |\n| Достоевский Ф.М. | Братья Карамазовы  | 799.01 |\n+------------------+--------------------+--------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1055742,
                "text": {
                    "text": "Выборка данных, логические операции\n Логическое выражение после ключевого слова WHERE кроме операторов сравнения  и выражений может включать  логические операции (И «and», ИЛИ «or», НЕ «not») и круглые скобки, изменяющие приоритеты выполнения операций.\nПриоритеты операций:\n\nкруглые скобки\nумножение  (*),  деление (/)\nсложение  (+), вычитание (-)\nоператоры сравнения (=, >, <, >=, <=, <>)\nNOT\nAND\nOR\n\nПример\nВывести название, автора и цену тех книг, которые написал Булгаков, ценой больше 600 рублей\nЗапрос:\nSELECT title, author, price \nFROM book\nWHERE price > 600 AND author = 'Булгаков М.А.';\nРезультат:\n+--------------------+---------------+--------+\n| title              | author        | price  |\n+--------------------+---------------+--------+\n| Мастер и Маргарита | Булгаков М.А. | 670.99 |\n+--------------------+---------------+--------+\n Пример\nВывести название, цену  тех книг, которые написал Булгаков или Есенин, ценой больше 600 рублей\nЗапрос:\nSELECT title, author, price \nFROM book\nWHERE (author = 'Булгаков М.А.' OR author = 'Есенин С.А.') AND price > 600;\nРезультат:\n+-----------------------+---------------+--------+\n| title                 | author        | price  |\n+-----------------------+---------------+--------+\n| Мастер и Маргарита    | Булгаков М.А. | 670.99 |\n| Стихотворения и поэмы | Есенин С.А.   | 650.00 |\n+-----------------------+---------------+--------+\nПояснение. \nВ данном запросе обязательно нужно поставить скобки, так как без них сначала вычисляется  author = 'Есенин С.А.' and price > 600, а потом уже выражение через or. Без скобок были бы отобраны все книги Булгакова и те книги Есенина, цена которых больше 600.\nЗапрос:\nSELECT title, author, price \nFROM book\nWHERE author = 'Булгаков М.А.' OR author = 'Есенин С.А.' AND price > 600;\nРезультат (сравните с предыдущим):\n+-----------------------+---------------+--------+\n| title                 | author        | price  |\n+-----------------------+---------------+--------+\n| Мастер и Маргарита    | Булгаков М.А. | 670.99 |\n| Белая гвардия         | Булгаков М.А. | 540.50 |\n| Стихотворения и поэмы | Есенин С.А.   | 650.00 |\n+-----------------------+---------------+--------+\nЗадание\nВывести название, автора,  цену  и количество всех книг, цена которых меньше 500 или больше 600, а стоимость всех экземпляров этих книг больше или равна 5000.\n Результат:\n+-----------------------+-------------+--------+--------+\n| title                 | author      | price  | amount |\n+-----------------------+-------------+--------+--------+\n| Стихотворения и поэмы | Есенин С.А. | 650.00 | 15     |\n+-----------------------+-------------+--------+--------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1056946,
                "text": {
                    "text": "Выборка данных, операторы BETWEEN, IN\n Логическое выражение после ключевого слова WHERE может включать операторы  BETWEEN и IN. Приоритет  у этих операторов такой же как у операторов сравнения, то есть они выполняются раньше, чем NOT, AND, OR.\nОператор BETWEEN позволяет отобрать данные, относящиеся к некоторому интервалу, включая его границы.\nПример\nВыбрать названия и количества тех книг, количество которых от 5 до 14 включительно.\nЗапрос:\nSELECT title, amount \nFROM book\nWHERE amount BETWEEN 5 AND 14;\nРезультат:\n+---------------+--------+\n| title         | amount |\n+---------------+--------+\n| Белая гвардия | 5      |\n| Идиот         | 10     |\n+---------------+--------+\nЭтот запрос можно реализовать по-другому, результат будет точно такой же.\nSELECT title, amount \nFROM book\nWHERE amount >= 5 AND amount <=14;\nОператор  IN  позволяет выбрать данные, соответствующие значениям из списка.\nПример\nВыбрать названия и цены книг, написанных Булгаковым или Достоевским.\nЗапрос:\nSELECT title, price \nFROM book\nWHERE author IN ('Булгаков М.А.', 'Достоевский Ф.М.');\nРезультат:\n+--------------------+--------+\n| title              | price  |\n+--------------------+--------+\n| Мастер и Маргарита | 670.99 |\n| Белая гвардия      | 540.50 |\n| Идиот              | 460.00 |\n| Братья Карамазовы  | 799.01 |\n+--------------------+--------+\nЭтот запрос можно реализовать по-другому, результат будет точно такой же.\nSELECT title, price \nFROM book\nWHERE author = 'Булгаков М.А.' OR author = 'Достоевский Ф.М.';\nЗадание\nВывести название и авторов тех книг, цены которых принадлежат интервалу от 540.50 до 800 (включая границы),  а количество или 2, или 3, или 5, или 7 .\nРезультат:\n+--------------------+------------------+\n| title              | author           |\n+--------------------+------------------+\n| Мастер и Маргарита | Булгаков М.А.    |\n| Белая гвардия      | Булгаков М.А.    |\n| Братья Карамазовы  | Достоевский Ф.М. |\n+--------------------+------------------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1059263,
                "text": {
                    "text": "Выборка данных с сортировкой\nПри выборке можно указывать столбец или несколько столбцов, по которым необходимо отсортировать отобранные строки. Для этого используются ключевые слова ORDER BY, после которых задаются имена столбцов. При этом строки сортируются по первому столбцу. Если указан второй столбец, сортировка осуществляется только для тех строк, у которых значения первого столбца одинаковы. По умолчанию ORDER BY выполняет сортировку по возрастанию. Чтобы управлять направлением сортировки вручную, после имени столбца указывается ключевое слово ASC (по возрастанию) или DESC (по убыванию). \nСтолбцы после ключевого слова ORDER BY можно задавать:\n\nназванием столбца;\nномером столбца;\nименем столбца (указанным после AS).\n\nПример\nВывести название, автора и цены книг. Информацию  отсортировать по названиям книг в алфавитном порядке.\nЗапрос:\nSELECT title, author, price\nFROM book\nORDER BY title;\nРезультат:\n+-----------------------+------------------+--------+\n| title                 | author           | price  |\n+-----------------------+------------------+--------+\n| Белая гвардия         | Булгаков М.А.    | 540.50 |\n| Братья Карамазовы     | Достоевский Ф.М. | 799.01 |\n| Идиот                 | Достоевский Ф.М. | 460.00 |\n| Мастер и Маргарита    | Булгаков М.А.    | 670.99 |\n| Стихотворения и поэмы | Есенин С.А.      | 650.00 |\n+-----------------------+------------------+--------+\nАналогичный результат получится при использовании запроса:\nSELECT title, author, price\nFROM book\nORDER BY 1;\nПример\nВывести автора, название и количество книг, в отсортированном в алфавитном порядке по автору и по убыванию количества, для тех книг, цены которых меньше 750 рублей.\nЗапрос:\nSELECT author, title, amount AS Количество\nFROM book\nWHERE price < 750\nORDER BY author, amount DESC;\nРезультат:\n+------------------+-----------------------+------------+\n| author           | title                 | Количество |\n+------------------+-----------------------+------------+\n| Булгаков М.А.    | Белая гвардия         | 5          |\n| Булгаков М.А.    | Мастер и Маргарита    | 3          |\n| Достоевский Ф.М. | Идиот                 | 10         |\n| Есенин С.А.      | Стихотворения и поэмы | 15         |\n+------------------+-----------------------+------------+\nМожно использовать другие варианты записи запроса:\nSELECT author, title, amount AS Количество\nFROM book\nWHERE price < 750\nORDER BY author, Количество DESC;\nSELECT author, title, amount AS Количество\nFROM book\nWHERE price < 750\nORDER BY 1, 3 DESC;\nВажно! Если названия столбцов заключены в кавычки, то при использовании их в сортировке, необходимо записывать их БЕЗ КАВЫЧЕК.\nЗадание\nВывести  автора и название  книг, количество которых принадлежит интервалу от 2 до 14 (включая границы). Информацию  отсортировать сначала по авторам (в обратном алфавитном порядке), а затем по названиям книг (по алфавиту).\nРезультат:\n+------------------+--------------------+\n| author           | title              |\n+------------------+--------------------+\n| Достоевский Ф.М. | Братья Карамазовы  |\n| Достоевский Ф.М. | Идиот              |\n| Булгаков М.А.    | Белая гвардия      |\n| Булгаков М.А.    | Мастер и Маргарита |\n+------------------+--------------------+\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1057596,
                "text": {
                    "text": "Выборка данных, оператор LIKE\nОператор LIKE используется для сравнения строк. В отличие от операторов отношения равно (=) и не равно (<>), LIKE позволяет сравнивать строки не на полное совпадение (не совпадение), а в соответствии с шаблоном. Шаблон может включать обычные символы и символы-шаблоны. При сравнении с шаблоном, его обычные символы должны в точности совпадать с символами, указанными в строке. Символы-шаблоны могут совпадать с произвольными элементами символьной строки.\n\n[TABLE]\n\nПример 1\nВывести названия книг, начинающихся с буквы «Б».\nЗапрос:\nSELECT title \nFROM book\nWHERE title LIKE 'Б%';\n/* эквивалентное условие \ntitle LIKE 'б%'\n*/\nРезультат:\n+-------------------+\n| title             |\n+-------------------+\n| Белая гвардия     |\n| Братья Карамазовы |\n+-------------------+\nПояснение Строчные и прописные буквы в строках эквивалентны.\nПример 2\nВывести название книг, состоящих ровно из 5 букв.\nЗапрос:\nSELECT title FROM book \nWHERE title LIKE \"_____\"\nРезультат:\n+-------+\n| title |\n+-------+\n| Идиот |\n| Поэмы |\n+-------+\nПояснениеДля обозначения одного любого символа используется  \"_\", следовательно для обозначения 5 символов используется 5 подряд символов подчеркивания.\nПример 3\nВывести книги, название которых длиннее 5 символов:\nЗапрос:\nSELECT title FROM book \nWHERE title LIKE \"______%\";\n/* эквивалентные условия \ntitle LIKE \"%______\"\ntitle LIKE \"%______%\"\n*/\n\nРезультат:\n+-----------------------+\n| title                 |\n+-----------------------+\n| Мастер и Маргарита    |\n| Белая гвардия         |\n| Братья Карамазовы     |\n| Стихотворения и поэмы |\n| Дети полуночи         |\n| Лирика                |\n| Капитанская дочка     |\n+-----------------------+\nПояснение  \nДля того чтобы вывести названия, состоящие из любого количества символов послеLIKE можно использовать шаблон \"%\", с помощью которого отбираются строки, состоящие из любого количества символов, в том числе и \"пустые\", поскольку % заменяет любое количество символов, в том числе и нулевое.\nЧтобы указать, что в названии должен быть хотя бы один символ, можно использовать один из эквивалентных шаблонов:\n\n \"_%\" - сначала идет символ, а за ним любое количество символов;\n\"%_\" - сначала идет любое количество символов, а затем обязательный символ;\n\"%_%\" - сначала идет любое количество символов, потом обязательный символ, а за ним любое количество символов.\n\n\nПример 4\nВывести названия книг, которые содержат букву \"и\" как отдельное слово, если считать, что слова в названии отделяются друг от друга пробелами и не содержат знаков препинания.\n Запрос:\nSELECT title FROM book \nWHERE   title LIKE \"_% и _%\" /*отбирает слово И внутри названия */\n    OR title LIKE \"и _%\" /*отбирает слово И в начале названия */\n    OR title LIKE \"_% и\" /*отбирает слово И в конце названия */\n    OR title LIKE \"и\" /* отбирает название, состоящее из одного слова И */\n\n\nРезультат:\n+-----------------------+\n| title                 |\n+-----------------------+\n| Мастер и Маргарита    |\n| Стихотворения и поэмы |\n+-----------------------+\nПояснение\nСлово \"и\" может располагаться в названии в следующих позициях (при условии, что слова отделяются друг от друга пробелами):\n\n в середине -  \"_% и _%\" - сначала идет любое количество символов (один обязательный), потом обязательный пробел, а за ним \"и\", снова обязательный пробел, и наконец любое количество символов (один обязательный);\nв начале - \"и _%\" - сначала идет \"и\", обязательный пробел и любое количество символов (один обязательный);\nв конце - \"_% и\" - сначала идет любое количество символов, затем обязательный пробел и буква \"и\":\nодно слово в названии - \"и\".\n\nВместо \"_%\" можно использовать эквивалентные шаблоны \"%_\" и \"%_%\" .\nВ качестве обязательного символа ( \"_\"), может быть и пробел, но, к сожалению, шаблоны для LIKE не позволяют исключить какой-то символ. Это можно сделать только с помощью регулярных выражений (будут рассмотрены в уроке 3.5)\n\nПример 5\nВывести названия книг, которые состоят ровно из одного слова, если считать, что слова в названии отделяются друг от друга пробелами .\n Запрос:\nSELECT title FROM book \nWHERE title NOT LIKE \"% %\";    \n\nРезультат:\n+--------+\n| title  |\n+--------+\n| Идиот  |\n| Лирика |\n| Поэмы  |\n+--------+\nПояснение Отсутствие пробела в названии означает, что оно состоит из одного слова. Чтобы это проверить используется оператор NOT LIKE, который в данном случае отберет все названия, в которых нет пробелов.\nЗадание\nВывести название и автора тех книг, название которых состоит из двух и более слов, а инициалы автора содержат букву «С». Считать, что в названии слова отделяются друг от друга пробелами и не содержат знаков препинания, между фамилией автора и инициалами обязателен пробел, инициалы записываются без пробела в формате: буква, точка, буква, точка. Информацию отсортировать по названию книги в алфавитном порядке.\nРезультат:\n+-----------------------+-------------+\n| title                 | author      |\n+-----------------------+-------------+\n| Капитанская дочка     | Пушкин А.С. |\n| Стихотворения и поэмы | Есенин С.А. |\n+-----------------------+-------------+\nПояснение.\n\nПри записи условия, необходимо учесть, что слово в названии обязательно должно содержать  хотя бы один символ.\nИнициалы в этом задании - это первая буква имени или отчества, после которой стоит точка.\nБуква C должна быть написана в РУССКОЙ раскладке. Если не проходит решение - проверьте это.\n\n\nВажно! Только для этого шага в таблицу добавлены новые записи.\nСтруктура и наполнение таблицы book:\n+---------+-----------------------+------------------+--------+--------+\n| book_id | title                 | author           | price  | amount |\n+---------+-----------------------+------------------+--------+--------+\n| 1       | Мастер и Маргарита    | Булгаков М.А.    | 670.99 | 3      |\n| 2       | Белая гвардия         | Булгаков М.А.    | 540.50 | 5      |\n| 3       | Идиот                 | Достоевский Ф.М. | 460.00 | 10     |\n| 4       | Братья Карамазовы     | Достоевский Ф.М. | 799.01 | 2      |\n| 5       | Стихотворения и поэмы | Есенин С.А.      | 650.00 | 15     |\n| 6       |                       | Иванов С.С.      | 50.00  | 10     |\n| 7       | Дети полуночи         | Рушди Салман     | 950.00 | 5      |\n| 8       | Лирика                | Гумилев Н.С.     | 460.00 | 10     |\n| 9       | Поэмы                 | Бехтерев С.С.    | 460.00 | 10     |\n| 10      | Капитанская дочка     | Пушкин А.С.      | 520.50 | 7      |\n+---------+-----------------------+------------------+--------+--------+\n",
                    "tables": [
                        "{\"Символ-шаблон\":{\"0\":\"%\",\"1\":\"_ (подчеркивание)\"},\"Описание\":{\"0\":\"Любая строка, содержащая ноль или более символов\",\"1\":\"Любой одиночный символ\"},\"Пример\":{\"0\":\"SELECT * FROM book WHERE author LIKE '%М.%' выполняет поиск и выдает все книги, инициалы авторов которых содержат «М.»\",\"1\":\"SELECT * FROM book WHERE title LIKE 'Поэм_' выполняет поиск и выдает все книги, названия которых либо «Поэма», либо «Поэмы» и пр.\"}}"
                    ]
                }
            },
            {
                "id_step": 1045768,
                "text": {
                    "text": "Задание\nПридумайте один или несколько запросов к нашей таблице book. Проверьте, правильно ли они работают.\nПри желании можно формулировку запросов  разместить в комментариях.\nРазмещенные задания можно использовать для закрепления материала урока.\nОценивайте понравившиеся Вам запросы.\nВ последнем модуле создан отдельный урок, в котором мы разместим запросы, набравшие наибольшее количество лайков. \nСтруктура и наполнение таблицы book:\n\n[TABLE]\n",
                    "tables": [
                        "{\"0\":{\"0\":\"book_id\",\"1\":\"INT PRIMARY KEY AUTO_INCREMENT\",\"2\":\"1\",\"3\":\"2\",\"4\":\"3\",\"5\":\"4\",\"6\":\"5\"},\"1\":{\"0\":\"title\",\"1\":\"VARCHAR(50)\",\"2\":\"Мастер и Маргарита\",\"3\":\"Белая гвардия\",\"4\":\"Идиот\",\"5\":\"Братья Карамазовы\",\"6\":\"Стихотворения и поэмы\"},\"2\":{\"0\":\"author\",\"1\":\"VARCHAR(30)\",\"2\":\"Булгаков М.А.\",\"3\":\"Булгаков М.А.\",\"4\":\"Достоевский Ф.М.\",\"5\":\"Достоевский Ф.М.\",\"6\":\"Есенин С.А.\"},\"3\":{\"0\":\"price\",\"1\":\"DECIMAL(8,2)\",\"2\":\"670.99\",\"3\":\"540.50\",\"4\":\"460.00\",\"5\":\"799.01\",\"6\":\"650.00\"},\"4\":{\"0\":\"amount\",\"1\":\"INT\",\"2\":\"3\",\"3\":\"5\",\"4\":\"10\",\"5\":\"2\",\"6\":\"15\"}}"
                    ]
                }
            }
        ]
    }
]