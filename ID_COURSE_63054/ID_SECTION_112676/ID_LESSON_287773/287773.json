[
    {
        "id_lesson": 287773,
        "steps": [
            {
                "id_step": 1073492,
                "text": {
                    "text": "Содержание урока\nВ этом уроке на каждом шаге используется таблица,  в которой представлена информация о начисленных водителям штрафах за нарушения правил дорожного движения (ПДД). С помощью запросов корректировки необходимо выполнить следующие действия:\n\nсоздать таблицу с информацией о штрафах ;\nзаполнить ее;\nзанести сумму штрафа за каждое новое нарушение ПДД;\nесли водитель на определенной машине совершил повторное нарушение, то сумму его штрафа за данное нарушение нужно увеличить в два раза (часть 1, часть 2) ;\nесли водитель оплатил свой штраф в течение 20 дней со дня нарушения, то значение его штрафа уменьшить в два раза;\nсоздать новую таблицу,  в которую включить информацию о всех неоплаченных штрафах;\nудалить  информацию о нарушениях, совершенных раньше некоторой даты.\n\nНа четвертом шаге рассматривается временное именование таблиц (алиасы). \nСтруктура и наполнение таблиц\nВ таблице fine  представлена информация о начисленных водителям штрафах за нарушения правил дорожного движения (ПДД) (фамилия водителя, номер машины, описание нарушения, сумма штрафа, дата совершения нарушения и дата оплаты штрафа):\n\n[TABLE]\n\nВ таблицу  traffic_violation занесены нарушения ПДД и соответствующие штрафы (в рублях): \n\n[TABLE]\n",
                    "tables": [
                        "{\"0\":{\"0\":\"fine_id\",\"1\":\"INT PRIMARY KEY  AUTO_INCREMENT\",\"2\":\"1\",\"3\":\"2\",\"4\":\"3\",\"5\":\"4\",\"6\":\"5\",\"7\":\"6\",\"8\":\"7\",\"9\":\"8\"},\"1\":{\"0\":\"name\",\"1\":\"VARCHAR(30)\",\"2\":\"Баранов П.Е.\",\"3\":\"Абрамова К.А.\",\"4\":\"Яковлев Г.Р.\",\"5\":\"Яковлев Г.Р.\",\"6\":\"Колесов С.П.\",\"7\":\"Баранов П.Е.\",\"8\":\"Абрамова К.А.\",\"9\":\"Яковлев Г.Р.\"},\"2\":{\"0\":\"number_plate\",\"1\":\"VARCHAR(6)\",\"2\":\"Р523ВТ\",\"3\":\"О111АВ\",\"4\":\"Т330ТТ\",\"5\":\"М701АА\",\"6\":\"К892АХ\",\"7\":\"Р523ВТ\",\"8\":\"О111АВ\",\"9\":\"Т330ТТ\"},\"3\":{\"0\":\"violation\",\"1\":\"VARCHAR(50)\",\"2\":\"Превышение скорости  (от 40 до 60)\",\"3\":\"Проезд на  запрещающий сигнал\",\"4\":\"Превышение скорости  (от 20 до 40)\",\"5\":\"Превышение скорости  (от 20 до 40)\",\"6\":\"Превышение скорости  (от 20 до 40)\",\"7\":\"Превышение скорости  (от 40 до 60)\",\"8\":\"Проезд на  запрещающий сигнал\",\"9\":\"Проезд на  запрещающий сигнал\"},\"4\":{\"0\":\"sum_fine\",\"1\":\"DECIMAL(8,2)\",\"2\":\"500.00\",\"3\":\"1000.00\",\"4\":\"500.00\",\"5\":null,\"6\":null,\"7\":null,\"8\":null,\"9\":null},\"5\":{\"0\":\"date_violation\",\"1\":\"DATЕ\",\"2\":\"2020-01-12\",\"3\":\"2020-01-14\",\"4\":\"2020-01-23\",\"5\":\"2020-01-12\",\"6\":\"2020-02-01\",\"7\":\"2020-02-14\",\"8\":\"2020-02-23\",\"9\":\"2020-03-03\"},\"6\":{\"0\":\"date_payment\",\"1\":\"DATE\",\"2\":\"2020-01-17\",\"3\":\"2020-02-27\",\"4\":\"2020-02-23\",\"5\":null,\"6\":null,\"7\":null,\"8\":null,\"9\":null}}",
                        "{\"0\":{\"0\":\"violation_id\",\"1\":\"INT PRIMARY KEY  AUTO_INCREMENT\",\"2\":\"1\",\"3\":\"2\",\"4\":\"3\"},\"1\":{\"0\":\"violation\",\"1\":\"VARCHAR(50)\",\"2\":\"Превышение скорости  (от 20 до 40)\",\"3\":\"Превышение скорости  (от 40 до 60)\",\"4\":\"Проезд на  запрещающий сигнал\"},\"2\":{\"0\":\"sum_fine\",\"1\":\"DECIMAL(8,2)\",\"2\":\"500.00\",\"3\":\"1000.00\",\"4\":\"1000.00\"}}"
                    ]
                }
            },
            {
                "id_step": 1084143,
                "text": {
                    "text": "Задание\nСоздать таблицу fine следующей структуры:\n\n[TABLE]\n\nРезультат\nAffected rows: 0\n\nСвязанные шаги\n\nтипы столбцов;\nсоздание таблицы (шаг, шаг).\n\n",
                    "tables": [
                        "{\"0\":{\"0\":\"Поле\",\"1\":\"fine_id\",\"2\":\"name\",\"3\":\"number_plate\",\"4\":\"violation\",\"5\":\"sum_fine\",\"6\":\"date_violation\",\"7\":\"date_payment\"},\"1\":{\"0\":\"Описание\",\"1\":\"ключевой столбец целого типа с автоматическим увеличением значения ключа на 1\",\"2\":\"строка длиной 30\",\"3\":\"строка длиной 6\",\"4\":\"строка длиной 50\",\"5\":\"вещественное число, максимальная длина 8, количество знаков после запятой 2\",\"6\":\"дата\",\"7\":\"дата\"}}"
                    ]
                }
            },
            {
                "id_step": 1084367,
                "text": {
                    "text": "Задание\nВ таблицу fine первые 5 строк уже занесены. Добавить в таблицу записи с ключевыми значениями 6, 7, 8.\n\n[TABLE]\n\nПояснение\n\nМежду формулировкой нарушения и открывающей скобкой ПРОБЕЛА НЕТ. Например, Превышение скорости(от 40 до 60). \nДля занесения пустых значений в поля используется оператор Null.\nНомера машин записывать РУССКИМИ буквами.\n\n\nРезультат\nAffected rows: 1\n\nAffected rows: 1\n\nAffected rows: 1\n\nQuery result:\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n| name          | number_plate | violation                        | sum_fine | date_violation   | date_payment |\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) | 500.00   | 2020-01-12       | 2020-01-17   |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | 1000.00  | 2020-01-14       | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ       | Превышение скорости(от 20 до 40) | 500.00   | 2020-01-23       | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА       | Превышение скорости(от 20 до 40) | NULL     | 2020-01-12       | NULL         |\n| Колесов С.П.  | К892АХ       | Превышение скорости(от 20 до 40) | NULL     | 2020-02-01       | NULL         |\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) | NULL     | 2020-02-14       | NULL         |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | NULL     | 2020-02-23       | NULL         |\n| Яковлев Г.Р.  | Т330ТТ       | Проезд на запрещающий сигнал     | NULL     | 2020-03-03       | NULL         |\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n\n\nВажно\nПри создании запроса текст с названием нарушений нужно копировать из таблицы Результат, а не из первой таблицы.\n\nТекст задания (чтобы не прокручивать страницу):\n\n В таблицу fine первые 5 строк уже занесены. Добавить в таблицу записи с ключевыми значениями 6, 7, 8.\n\nСвязанные шаги\n\nвставка строк (шаг, шаг).\n\n",
                    "tables": [
                        "{\"0\":{\"0\":\"fine_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\",\"4\":\"4\",\"5\":\"5\",\"6\":\"6\",\"7\":\"7\",\"8\":\"8\"},\"1\":{\"0\":\"name\",\"1\":\"Баранов П.Е.\",\"2\":\"Абрамова К.А.\",\"3\":\"Яковлев Г.Р.\",\"4\":\"Яковлев Г.Р.\",\"5\":\"Колесов С.П.\",\"6\":\"Баранов П.Е.\",\"7\":\"Абрамова К.А.\",\"8\":\"Яковлев Г.Р.\"},\"2\":{\"0\":\"number_plate\",\"1\":\"Р523ВТ\",\"2\":\"О111АВ\",\"3\":\"Т330ТТ\",\"4\":\"М701АА\",\"5\":\"К892АХ\",\"6\":\"Р523ВТ\",\"7\":\"О111АВ\",\"8\":\"Т330ТТ\"},\"3\":{\"0\":\"violation\",\"1\":\"Превышение скорости  (от 40 до 60)\",\"2\":\"Проезд на  запрещающий сигнал\",\"3\":\"Превышение скорости  (от 20 до 40)\",\"4\":\"Превышение скорости  (от 20 до 40)\",\"5\":\"Превышение скорости  (от 20 до 40)\",\"6\":\"Превышение скорости  (от 40 до 60)\",\"7\":\"Проезд на  запрещающий сигнал\",\"8\":\"Проезд на  запрещающий сигнал\"},\"4\":{\"0\":\"sum_fine\",\"1\":\"500.00\",\"2\":\"1000.00\",\"3\":\"500.00\",\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null},\"5\":{\"0\":\"date_violation\",\"1\":\"2020-01-12\",\"2\":\"2020-01-14\",\"3\":\"2020-01-23\",\"4\":\"2020-01-12\",\"5\":\"2020-02-01\",\"6\":\"2020-02-14\",\"7\":\"2020-02-23\",\"8\":\"2020-03-03\"},\"6\":{\"0\":\"date_payment\",\"1\":\"2020-01-17\",\"2\":\"2020-02-27\",\"3\":\"2020-02-23\",\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}}"
                    ]
                }
            },
            {
                "id_step": 1082158,
                "text": {
                    "text": "Использование временного имени таблицы (алиаса)\nТеоретический материал для этого шага подготовлен Михаилом Захаровым . Большое ему спасибо!\nЧтобы не писать название таблицы каждый раз, удобно использовать алиасы.\nАлиас, это псевдоним, который мы присваивали столбцам после ключевого слова AS(шаг).  Алиасы так же можно использовать и для таблиц. Это становится актуальным, при увеличении числа используемых таблиц, их иногда может быть и 5 и 10 и более. Псевдонимы помогают сделать запрос чище и читабельнее.\nДля присваивания псевдонима существует 2 варианта: \n\nс использованием ключевого слова AS \n\nFROM fine AS f, traffic_violation AS tv\n\nа так же и без него\n\nFROM fine f, traffic_violation tv\nПосле присвоения таблице алиаса, он используется во всех разделах запроса, в котором алиас задан. Например:\nWHERE f.violation = tv.violation\nПример\nДля тех, кто уже оплатил штраф, вывести информацию о том, изменялась ли стандартная сумма штрафа.\nЗапрос:\nSELECT  f.name, f.number_plate, f.violation, \n   if(\n    f.sum_fine = tv.sum_fine, \"Стандартная сумма штрафа\", \n    if(\n      f.sum_fine < tv.sum_fine, \"Уменьшенная сумма штрафа\", \"Увеличенная сумма штрафа\"\n    )\n  ) AS description               \nFROM  fine f, traffic_violation tv\nWHERE tv.violation = f.violation and f.sum_fine IS NOT Null;\nРезультат: \n+---------------+--------------+----------------------------------+--------------------------+\n| name          | number_plate | violation                        | description              |\n+---------------+--------------+----------------------------------+--------------------------+\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) | Уменьшенная сумма штрафа |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | Стандартная сумма штрафа |\n| Яковлев Г.Р.  | Т330ТТ       | Превышение скорости(от 20 до 40) | Стандартная сумма штрафа |\n+---------------+--------------+----------------------------------+--------------------------+\n\nЗадание\nЗанести в таблицу fine суммы штрафов, которые должен оплатить водитель, в соответствии с данными из таблицы traffic_violation. При этом суммы заносить только в пустые поля столбца  sum_fine.\nТаблица traffic_violationсоздана и заполнена.\nВажно! Сравнение значения столбца с пустым значением осуществляется с помощью оператора IS NULL.\nПояснение\n1. После ключевого слова UPDATE кроме обновляемой таблицыfine укажите таблицу traffic_violation, для того чтобы запрос видел таблицы источники.  Сначала перечисляем все источники, потом выполняем необходимые действия.\n2.Обновляйте только те записи таблицыfine, у которых значение столбца violationсовпадает со значением соответствующего столбца таблицы traffic_violation, а также значение столбца sum_fine пусто.\n\nРезультат\nПримечание: для сокращения записи ключевой столбец не показан.\nAffected rows: 5\nQuery result:\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 500.00   | 2020-01-12     | NULL         |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 1000.00  | 2020-02-14     | NULL         |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 1000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 1000.00  | 2020-03-03     | NULL         |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n\n\nСвязанные шаги\n\nобновление данных (шаг, шаг);\nусловие отбора.\n\n\nСтруктура и наполнение исходной таблицы fine (без ключевого столбца) и таблицыtraffic_violation\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment | \n|               | _plate |                              |          |                |              | \n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | NULL     | 2020-01-12     | NULL         |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | NULL     | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | NULL     | 2020-02-14     | NULL         |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| NULL     | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| NULL     | 2020-03-03     | NULL         |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n+--------------+----------------------------------+----------+\n| violation_id | violation                        | sum_fine |\n+--------------+----------------------------------+----------+\n| 1            | Превышение скорости(от 20 до 40) | 500.00   |\n| 2            | Превышение скорости(от 40 до 60) | 1000.00  |\n| 3            | Проезд на запрещающий сигнал     | 1000.00  |\n+--------------+----------------------------------+----------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1084390,
                "text": {
                    "text": "Группировка данных по нескольким столбцам\nВ разделе GROUP BY можно указывать несколько столбцов, разделяя их запятыми. Тогда к одной группе будут относиться записи, у которых значения столбцов, входящих в группу, равны. Рассмотрим группировку по нескольким столбцам на примере следующего запроса:\nSELECT name, number_plate, violation, count(*)\nFROM fine\nGROUP BY name, number_plate, violation;\n1. Сначала записи таблицы  fine разделяются на группы. В каждую группу включаются строки, у которых равны значения в столбцах name, number_plate и violation  соответственно. Получается 6 групп. \n\n2. Затем вычисляется функция count(*), которая определяет количество записей в каждой группе. Получается, что к первым двум группам относятся по две записи, ко всем остальным - по одной.\n\nВажно! В разделе GROUP BY нужно перечислять все НЕАГРЕГИРОВАННЫЕ столбцы (к которым не применяются групповые функции) из SELECT.\nЗадание\nВывести фамилию, номер машины и нарушение только для тех водителей, которые на одной машине нарушили одно и то же правило   два и более раз. При этом учитывать все нарушения, независимо от того оплачены они или нет. Информацию отсортировать в алфавитном порядке, сначала по фамилии водителя, потом по номеру машины и, наконец, по нарушению.\nПояснение\nПод увеличение  штрафа в два раза подходит водитель «Абрамова К.А.», который на машине с государственным номером «О111АВ» совершил повторное нарушение «Проезд на запрещающий сигнал», а также водитель  «Баранов П.Е.» , который на машине с номером  «Р523ВТ» дважды совершил нарушение «Превышение скорости(от 40 до 60) ».\n\nРезультат\n+---------------+--------------+----------------------------------+\n| name          | number_plate | violation                        |\n+---------------+--------------+----------------------------------+\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     |\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) |\n+---------------+--------------+----------------------------------+\n\nСвязанные шаги\n\nвыборка столбцов;\nусловие отбора в запросах группировки ;\nсортировка.\n\n\nСтруктура и наполнение таблицы fine (без ключевого столбца) перед выполнением этого шага\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 500.00   | 2020-01-12     | NULL         |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 1000.00  | 2020-02-14     | NULL         |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 1000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 1000.00  | 2020-03-03     | NULL         |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1084601,
                "text": {
                    "text": "Задание\nВ таблице fine увеличить в два раза сумму неоплаченных штрафов для отобранных на предыдущем шаге записей. \nПояснение !!! если не получается запрос или валидатор выдает ошибки, раскройте это пояснение!!!\n\nДля всех нарушений, по которым штраф еще не оплачен, (тех, у которых date_payment имеет пустое значение Null), необходимо проверить, является ли данное нарушение для водителя и машины повторным, если да –  увеличить штраф в два раза.\nЕсли водитель совершил нарушение на другой машине, ему увеличивать штраф не нужно.\nЕсли несколько повторных нарушений не оплачены, то штраф увеличить для всех.\nЭтот запрос реализован на предыдущем шаге.\n\nПри реализации можно использовать вложенный запрос как отдельную таблицу, записанную после ключевого слова UPDATE, при этом вложенному запросу необходимо присвоить имя, например query_in:\nUPDATE fine, \n    (\n     SELECT ...\n    ) query_in\nSET ...\nWHERE указать, что совпадают нарушение, фамилия водителя и номер машины в таблицах fine и вложенном запросе query_in соответственно, а также дата оплаты в таблице fine пуста\nДругим способом решения является использование двух запросов: сначала создать временную таблицу, например query_in, в которую включить информацию о тех штрафах, сумму которых нужно увеличить в два раза, а затем уже обновлять информацию в таблице fine:\nCREATE TABLE query_in ...;\n\nUPDATE fine, query_in\nSET ...\nWHERE ...;\nПосле ключевого слова WHERE  указывается условие, при котором нужно обновлять данные. В нашем случае  данные обновляются, если и фамилия, и государственный номер, и нарушение совпадают в таблице fine и в результирующей таблице запроса query_in. Например, для связи по фамилии используется запись fine.name = query_in.name. Также в условии нужно учесть, что данные обновляются только для тех записей, у которых в столбце date_payment пусто.\n\nВажно! Если в запросе используется несколько таблиц или запросов, включающих одинаковые поля, то применяется полное имя столбца, включающего название таблицы через символ «.». Например,  fine.name  и  query_in.name.\nРезультат\nAffected rows: 2\n\nQuery result:\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n| name          | number_plate | violation                        | sum_fine | date_violation   | date_payment |\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) | 500.00   | 2020-01-12       | 2020-01-17   |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | 1000.00  | 2020-01-14       | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ       | Превышение скорости(от 20 до 40) | 500.00   | 2020-01-23       | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА       | Превышение скорости(от 20 до 40) | 500.00   | 2020-01-12       | NULL        |\n| Колесов С.П.  | К892АХ       | Превышение скорости(от 20 до 40) | 500.00   | 2020-02-01       | NULL         |\n| Баранов П.Е.  | Р523ВТ       | Превышение скорости(от 40 до 60) | 2000.00  | 2020-02-14       | NULL         |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | 2000.00  | 2020-02-23       | NULL         |\n| Яковлев Г.Р.  | Т330ТТ       | Проезд на запрещающий сигнал     | 1000.00  | 2020-03-03       | NULL         |\n+---------------+--------------+----------------------------------+----------+------------------+--------------+\n\nСвязанные шаги\n\nобновление данных (шаг, шаг, шаг);\nусловие отбора.\n\n\nСтруктура и наполнение таблицы fine (без ключевого столбца) перед выполнением этого шага\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 500.00   | 2020-01-12     | NULL         |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 1000.00  | 2020-02-14     | NULL         |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 1000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 1000.00  | 2020-03-03     | NULL         |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1084711,
                "text": {
                    "text": "Задание\nВодители оплачивают свои штрафы. В таблице payment занесены даты их оплаты:\n\n[TABLE]\n\nНеобходимо:\n\nв таблицу fine занести дату оплаты соответствующего штрафа из таблицы payment; \nуменьшить начисленный штраф в таблице fine в два раза  (только для тех штрафов, информация о которых занесена в таблицу payment) , если оплата произведена не позднее 20 дней со дня нарушения.\n\nПояснение к заданию\n1. Для уменьшения суммы штрафа в два раза в зависимости от условия можно  использовать функцию if().  Синтаксис раздела SET при использовании функции if() следующий:\nSET столбец = IF(условие, выражение_1, выражение_2)\nВыполняется этот оператор так:\n\nсначала вычисляется условие;\nесли условие ИСТИНА, то вычисляется выражение_1, в противном случае (если условие ЛОЖНО) вычисляется выражение_2;\nв столбец заносится результат выполнения функции (либо значение выражения_1, либо значение выражения_2 в зависимости от условия).\n\nНапример, чтобы обнулить штрафы, меньшие или равные 500 рублей, а остальные оставить без изменения, используется запрос:\nUPDATE fine\nSET sum_fine = IF(sum_fine <= 500, 0, sum_fine)\n2. Количество дней между датой нарушения и датой оплаты считается по формуле:\nколичество_дней = дата_оплаты - дата_нарушения \n\nПояснение к решению  !!! раскройте пояснение, если не получается решить или ошибка в запросе !!!\nШаблон запроса:\nUPDATE \n    fine, payment\nSET \n    fine.date_payment = дата оплаты из payment,\n    fine.sum_fine = сравнить разницу между датой нарушения и датой оплаты (из payment) \n                    и при необходимости уменьшить размер штрафа (использовать IF)\nWHERE\n    указать условие, что совпадают и номера машин, и нарушения, и \n    фамилия водителя в таблицах fine и payment, а также, что\n    дата оплаты в fine должна быть пуста\n\nРезультат\nAffected rows: 3\nQuery result:\n+---------------+--------+----------------------------------+----------+---------------------------+\n| name          | number_| violation                        | sum_fine | date_      | date_payment |\n|               |  plate |                                  |          | violation  |              |\n+---------------+--------+----------------------------------+----------+------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40 до 60) | 500.00   | 2020-01-12 | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал     | 1000.00  | 2020-01-14 | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20 до 40) | 500.00   | 2020-01-23 | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20 до 40) | 250.00   | 2020-01-12 | 2020-01-22   |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20 до 40) | 500.00   | 2020-02-01 | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40 до 60) | 2000.00  | 2020-02-14 | 2020-03-06   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал     | 2000.00  | 2020-02-23 | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигнал     | 500.00   | 2020-03-03 | 2020-03-23   |\n+---------------+--------+----------------------------------+----------+------------+--------------+\n\nСвязанные шаги\n\nобновление данных (шаг, шаг, шаг);\nфункция IF();\nвычитание дат;\nусловие отбора.\n\n\nСтруктура и наполнение таблицы fine (без ключевого столбца) перед выполнением этого шага\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 500.00   | 2020-01-12     | NULL         |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 2000.00  | 2020-02-14     | NULL         |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 2000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 1000.00  | 2020-03-03     | NULL         |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n",
                    "tables": [
                        "{\"0\":{\"0\":\"payment_id\",\"1\":\"1\",\"2\":\"2\",\"3\":\"3\"},\"1\":{\"0\":\"name\",\"1\":\"Яковлев Г.Р.\",\"2\":\"Баранов П.Е.\",\"3\":\"Яковлев Г.Р.\"},\"2\":{\"0\":\"number_plate\",\"1\":\"М701АА\",\"2\":\"Р523ВТ\",\"3\":\"Т330ТТ\"},\"3\":{\"0\":\"violation\",\"1\":\"Превышение скорости  (от 20 до 40)\",\"2\":\"Превышение скорости  (от 40 до 60)\",\"3\":\"Проезд на  запрещающий сигнал\"},\"4\":{\"0\":\"date_violation\",\"1\":\"2020-01-12\",\"2\":\"2020-02-14\",\"3\":\"2020-03-03\"},\"5\":{\"0\":\"date_payment\",\"1\":\"2020-01-22\",\"2\":\"2020-03-06\",\"3\":\"2020-03-23\"}}"
                    ]
                }
            },
            {
                "id_step": 1090296,
                "text": {
                    "text": "Задание\nСоздать новую таблицу back_payment, куда внести информацию о неоплаченных штрафах (Фамилию и инициалы водителя, номер машины, нарушение, сумму штрафа  и  дату нарушения) из таблицы fine.\nПояснение\nДля неоплаченных штрафов столбец date_payment имеет пустое значение.\n\nВажно. На этом шаге необходимо создать таблицу на основе запроса! Не нужно одним запросом создавать таблицу, а вторым в нее добавлять строки.\nРезультат\nAffected rows: 2\nQuery result:\n+---------------+--------------+----------------------------------+----------+------------------+\n| name          | number_plate | violation                        | sum_fine | date_violation   |\n+---------------+--------------+----------------------------------+----------+------------------+\n| Колесов С.П.  | К892АХ       | Превышение скорости(от 20 до 40) | 500.00   | 2020-02-01       |\n| Абрамова К.А. | О111АВ       | Проезд на запрещающий сигнал     | 2000.00  | 2020-02-23       |\n+---------------+--------------+----------------------------------+----------+------------------+\n\nСвязанные шаги\n\nсоздание таблицы;\nвыборка столбцов;\nусловие отбора;\nсравнение с пустым значением.\n\n\nСтруктура и наполнение таблицы fine (без ключевого столбца) перед выполнением этого шага\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 250.00   | 2020-01-12     | 2020-01-22   |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 2000.00  | 2020-02-14     | 2020-03-05   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 2000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 500.00   | 2020-03-03     | 2020-03-22   |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n",
                    "tables": []
                }
            },
            {
                "id_step": 1090321,
                "text": {
                    "text": "Задание\nУдалить из таблицы fine информацию о нарушениях, совершенных раньше 1 февраля 2020 года. \nРезультат\nAffected rows: 4\n\nQuery result (это выборка из таблицы fine после удаления записей):\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 2000.00  | 2020-02-14     | 2020-03-05   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 2000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 500.00   | 2020-03-03     | 2020-03-22   |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n\nСвязанные шаги\n\nудаление строк из таблицы;\nусловие отбора.\n\n\nСтруктура и наполнение таблицы fine (без ключевого столбца) перед выполнением этого шага\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| name          | number | violation                    | sum_fine | date_violation | date_payment |\n|               | _plate |                              |          |                |              |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 500.00   | 2020-01-12     | 2020-01-17   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигнал | 1000.00  | 2020-01-14     | 2020-02-27   |\n| Яковлев Г.Р.  | Т330ТТ | Превышение скорости(от 20... | 500.00   | 2020-01-23     | 2020-02-23   |\n| Яковлев Г.Р.  | М701АА | Превышение скорости(от 20... | 250.00   | 2020-01-12     | 2020-01-22   |\n| Колесов С.П.  | К892АХ | Превышение скорости(от 20... | 500.00   | 2020-02-01     | NULL         |\n| Баранов П.Е.  | Р523ВТ | Превышение скорости(от 40... | 2000.00  | 2020-02-14     | 2020-03-05   |\n| Абрамова К.А. | О111АВ | Проезд на запрещающий сигн...| 2000.00  | 2020-02-23     | NULL         |\n| Яковлев Г.Р.  | Т330ТТ | Проезд на запрещающий сигн...| 500.00   | 2020-03-03     | 2020-03-22   |\n+---------------+--------+------------------------------+----------+----------------+--------------+\n",
                    "tables": []
                }
            }
        ]
    }
]